---
title: 2.2.12 无法确定顺序的副作用
---

在本节前面的内容中，介绍了一些有序的表达式，例如赋值表达式、复合赋值表达式、逗号表达式等。这样的表达式中，出现了多个对相同对象的副作用时，其作用是确定的，例如：

```cpp
int i = 1;

i = ++i + 2 // i 的值是 4
```
这里的赋值表达式，先计算左边表达式，再计算右边表达式，最后赋值。其计算过程是：
1. 先计算左边，`i` 表达式的值是 `1`，且表示 `i` 对象。
2. 再计算右边，`++i + 2` 表达式的值是 `4`，发生副作用，`i` 的值变为 `2`。
3. 最后赋值，`i` 的值变为 `4`。

但是，并不是所有的表达式都是有序的。例如：
```cpp
++i + i++
```
这里 `++i` 和 `i++` 都会对 `i` 产生副作用，但是 C++ 规定 `+` 两边的表达式的计算是无顺序的。

对这样的表达式求值是错误的，无论是在学习还是在实际开发中，都应当避免写出这样的表达式。
